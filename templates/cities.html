{% extends "base.html" %}

{% block title %}Cities Table{% endblock %}

{% block content %}
<h1>Cities Table</h1>
<div class="page-description">
    <p>Cities are the endpoints of your power system. Your goal is to supply the necessary power demanded by each city as efficiently as possible.</p>
    <ul>
        <li><strong>Name:</strong> The name of the city.</li>
        <li><strong>Population:</strong> Total number of inhabitants in the city.</li>
        <li><strong>Energy Demand:</strong> The total energy requirement in megawatts.</li>
        <li><strong>Current Load:</strong> The current amount of energy being supplied to the city in megawatts.</li>
    </ul>
</div>
    <form action="{{ url_for('update_cities') }}" method="post">
        <table border="1">
            <thead>
                <tr>
                    <th>City ID</th>
                    <th>Name</th>
                    <th>Population</th>
                    <th>Energy Demand</th>
                    <th>Current Load</th>
                    <th>Actions</th>
                </tr>
            </thead>
        <tbody>
            {% for item in data %}
            <tr>
                <td><input type="hidden" name="city_id[]" value="{{ item.city_id }}">{{ item.city_id }}</td>
                <td><input type="text" name="name[]" value="{{ item.name }}"></td>
                <td><input type="text" name="population[]" value="{{ item.population }}"></td>
                <td><input type="text" name="energy_demand[]" value="{{ item.energy_demand }}"></td>
                <td><input type="text" name="current_load[]" value="{{ item.current_load }}"></td>
                <td>
                    <button type="submit" formaction="{{ url_for('delete_city') }}" formmethod="post" name="delete_city_id" value="{{ item.city_id }}">Delete</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        </table>
        <div class="form-action">
            <input type="submit" value="Update Cities">
        </div>
    </form>
    <form action="{{ url_for('create_city') }}" method="post" class="create-form">
        <h3>Create a New City:</h3>
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="population">Population:</label>
            <input type="text" id="population" name="population" required>
        </div>
        <div class="form-group">
            <label for="energy_demand">Energy Demand:</label>
            <input type="text" id="energy_demand" name="energy_demand" required>
        </div>
        <div class="form-group">
            <label for="current_load">Current Load:</label>
            <input type="text" id="current_load" name="current_load" required>
        </div>
        <div class="form-action">
            <input type="submit" value="Add City">
        </div>
    </form>
{% endblock %}
